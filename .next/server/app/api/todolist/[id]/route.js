(()=>{var e={};e.id=452,e.ids=[452],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11723:e=>{"use strict";e.exports=require("querystring")},12412:e=>{"use strict";e.exports=require("assert")},13581:(e,t)=>{"use strict";t.A=function(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}},18778:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{db:()=>u});var n=r(72094),i=r(64939),a=e([i,n]);[i,n]=a.then?(await a)():a;let o=new i.Pool({connectionString:process.env.DATABASE_URL||"postgres://postgres:root@localhost:5432/todolist_db"}),u=(0,n.fd)(o);s()}catch(e){s(e)}})},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31926:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{$t:()=>p,SL:()=>l});var n=r(56919),i=r(94634),a=r(96657),o=r(35426),u=r(18778),c=r(93573),d=e([u,c]);async function l(e){return u.db.delete(n.Qw).where((0,i.eq)(n.Qw.id,e)).returning()}async function p(e){let t=await (0,o.Mt)(c.N),r=t?.user?.id,s=await u.db.execute((0,a.ll)`select * from ${n.Qw} where ${n.Qw.completed} = ${e} and ${n.Qw.userId} = ${r}`);return Number(s.rowCount??0)}[u,c]=d.then?(await d)():d,s()}catch(e){s(e)}})},39855:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{patchFetch:()=>c,routeModule:()=>d,serverHooks:()=>w,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>p});var n=r(96559),i=r(48088),a=r(37719),o=r(69216),u=e([o]);o=(u.then?(await u)():u)[0];let d=new n.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/todolist/[id]/route",pathname:"/api/todolist/[id]",filename:"route",bundlePath:"app/api/todolist/[id]/route"},resolvedPagePath:"C:\\Users\\Toby\\TodoList\\TodoList-App\\src\\app\\api\\todolist\\[id]\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:p,serverHooks:w}=d;function c(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:p})}s()}catch(e){s(e)}})},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56919:(e,t,r)=>{"use strict";r.d(t,{Qw:()=>d,VV:()=>l,hs:()=>p});var s=r(5614),n=r(90267),i=r(50033),a=r(29334),o=r(54693),u=r(63431),c=r(9253);let d=(0,n.cJ)("todo",{id:(0,i.vX)("id").primaryKey(),todo:(0,a.Qq)("todo"),completed:(0,o.zM)("completed").default(!1),createdDate:(0,a.Qq)("createdDate"),userId:(0,u.nd)("user_id").notNull().references(()=>l.id)}),l=(0,n.cJ)("user",{id:(0,i.vX)("id").primaryKey(),name:(0,a.Qq)("name").notNull(),email:(0,a.Qq)("email").notNull(),password:(0,a.Qq)("password").notNull(),createdAt:(0,c.vE)("created_at").notNull().defaultNow(),updatedAt:(0,c.vE)("updated_at").notNull().defaultNow()}),p=(0,n.cJ)("blog",{id:(0,u.nd)().primaryKey().notNull(),title:(0,a.Qq)(),content:(0,a.Qq)()});(0,s.K1)(d,({one:e})=>({users:e(l,{fields:[d.userId],references:[l.id]})})),(0,s.K1)(l,({many:e})=>({todos:e(d)}))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},69216:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{DELETE:()=>d,GET:()=>p,PATCH:()=>l});var n=r(32190),i=r(94634),a=r(18778),o=r(56919),u=r(31926),c=e([a,u]);async function d(e){let t=new URL(e.url),r=Number(t.pathname.split("/").pop()),s=await (0,u.SL)(r);return n.NextResponse.json(s[0])}async function l(e){let t=new URL(e.url),r=Number(t.pathname.split("/").pop()),s=await e.json();if(void 0!==s.todo){let e=await a.db.update(o.Qw).set({todo:s.todo}).where((0,i.eq)(o.Qw.id,r)).returning();return n.NextResponse.json(e[0])}{let e=await a.db.update(o.Qw).set({completed:s.completed}).where((0,i.eq)(o.Qw.id,r)).returning();return n.NextResponse.json(e[0])}}async function p(e){let t=new URL(e.url),r=Number(t.pathname.split("/").pop()),s=await a.db.select().from(o.Qw).where((0,i.eq)(o.Qw.id,r));return console.log(s),n.NextResponse.json(s)}[a,u]=c.then?(await c)():c,s()}catch(e){s(e)}})},74075:e=>{"use strict";e.exports=require("zlib")},76926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return u}});let s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var s={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,r&&r.set(e,s),s}(r(61120));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}let i={current:null},a="function"==typeof s.cache?s.cache:e=>e,o=console.warn;function u(e){return function(...t){o(e(...t))}}a(e=>{try{o(i.current)}finally{i.current=null}})},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},93573:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{N:()=>c});var n=r(94634),i=r(13581),a=r(18778),o=r(56919),u=e([a]);a=(u.then?(await u)():u)[0];let c={providers:[(0,i.A)({id:"credentials",name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){let t=(await a.db.select().from(o.VV).where((0,n.eq)(o.VV.email,e.email)))[0];return t&&e.password===t.password?{id:String(t.id),email:t.email}:null}})],secret:process.env.AUTH_SECRET,pages:{signIn:"/auth/signin",signOut:"/auth/signout"},session:{strategy:"jwt"},callbacks:{session:async({session:e,token:t})=>(e?.user&&(e.user.id=t.sub),e)}};s()}catch(e){s(e)}})},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[243,426,164,190],()=>r(39855));module.exports=s})();