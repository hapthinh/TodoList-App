{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///E:/frontendApp/frontendApp/src/app/api/todolist/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { promises as fs } from \"fs\";\r\nimport path from \"path\";\r\n\r\nimport { Todo } from \"app/data/type\";\r\n\r\n// path file json -> app/json/todolist.json\r\nconst file = path.join(process.cwd() + \"/src/app/json/todolist.json\");\r\n\r\n// delete todo by id\r\nexport async function DELETE(request: Request) {\r\n  const url = new URL(request.url);\r\n  const id = url.pathname.split(\"/\").pop();\r\n  const raw = await fs.readFile(file, \"utf-8\");\r\n  const data = JSON.parse(raw);\r\n\r\n  // check id\r\n  if (!id) return NextResponse.json({ success: false, error: \"Missing id\" });\r\n\r\n  // find all todo have id # request.id\r\n  data.todos = data.todos.filter((todo: any) => Number(todo.id) !== Number(id));\r\n  try {\r\n    await fs.writeFile(file, JSON.stringify(data, null, 2), \"utf-8\");\r\n  } catch (err) {\r\n    console.error(\"Lỗi ghi file:\", err);\r\n    return NextResponse.json({ success: false, error: \"Lỗi ghi file\" });\r\n  }\r\n  return NextResponse.json({ success: true });\r\n}\r\n\r\n// Update Todo status or content by id\r\nexport async function PATCH(request: Request) {\r\n  const url = new URL(request.url);\r\n  const id = url.pathname.split(\"/\").pop();\r\n\r\n  const body = await request.json();\r\n  const { todo, status } = body;\r\n\r\n  const raw = await fs.readFile(file, \"utf-8\");\r\n  const data = JSON.parse(raw);\r\n\r\n  // find todo have id === request.id => update status this todo\r\n  const idx = data.todos.findIndex((t: Todo) => String(t.id) === String(id));\r\n\r\n  // check id\r\n  if (idx === -1) {\r\n    return NextResponse.json({ success: false });\r\n  }\r\n  if (typeof todo !== \"undefined\") data.todos[idx].todo = todo;\r\n  if (typeof status !== \"undefined\") data.todos[idx].status = status;\r\n\r\n  await fs.writeFile(file, JSON.stringify(data, null, 2), \"utf-8\");\r\n\r\n  return NextResponse.json({ data: data.todos[idx], success: true });\r\n}\r\n\r\n// GET todo by id\r\nexport async function GET(request: Request) {\r\n  const url = new URL(request.url);\r\n  const id = url.pathname.split(\"/\").pop();\r\n  const raw = await fs.readFile(file, \"utf-8\");\r\n  const data = JSON.parse(raw);\r\n\r\n  if (!id) return NextResponse.json({ success: false, error: \"Missing id\" });\r\n\r\n  const todo = data.todos.find((todo: any) => String(todo.id) === String(id));\r\n  if (!todo) return NextResponse.json({ success: false, error: \"Not found\" });\r\n\r\n  return NextResponse.json(todo);\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;AAIA,2CAA2C;AAC3C,MAAM,OAAO,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAK;AAGhC,eAAe,OAAO,OAAgB;IAC3C,MAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;IAC/B,MAAM,KAAK,IAAI,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG;IACtC,MAAM,MAAM,MAAM,6FAAA,CAAA,WAAE,CAAC,QAAQ,CAAC,MAAM;IACpC,MAAM,OAAO,KAAK,KAAK,CAAC;IAExB,WAAW;IACX,IAAI,CAAC,IAAI,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;QAAO,OAAO;IAAa;IAExE,qCAAqC;IACrC,KAAK,KAAK,GAAG,KAAK,KAAK,CAAC,MAAM,CAAC,CAAC,OAAc,OAAO,KAAK,EAAE,MAAM,OAAO;IACzE,IAAI;QACF,MAAM,6FAAA,CAAA,WAAE,CAAC,SAAS,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM,MAAM,IAAI;IAC1D,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO;QAAe;IACnE;IACA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;IAAK;AAC3C;AAGO,eAAe,MAAM,OAAgB;IAC1C,MAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;IAC/B,MAAM,KAAK,IAAI,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG;IAEtC,MAAM,OAAO,MAAM,QAAQ,IAAI;IAC/B,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG;IAEzB,MAAM,MAAM,MAAM,6FAAA,CAAA,WAAE,CAAC,QAAQ,CAAC,MAAM;IACpC,MAAM,OAAO,KAAK,KAAK,CAAC;IAExB,8DAA8D;IAC9D,MAAM,MAAM,KAAK,KAAK,CAAC,SAAS,CAAC,CAAC,IAAY,OAAO,EAAE,EAAE,MAAM,OAAO;IAEtE,WAAW;IACX,IAAI,QAAQ,CAAC,GAAG;QACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAM;IAC5C;IACA,IAAI,OAAO,SAAS,aAAa,KAAK,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG;IACxD,IAAI,OAAO,WAAW,aAAa,KAAK,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG;IAE5D,MAAM,6FAAA,CAAA,WAAE,CAAC,SAAS,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM,MAAM,IAAI;IAExD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,MAAM,KAAK,KAAK,CAAC,IAAI;QAAE,SAAS;IAAK;AAClE;AAGO,eAAe,IAAI,OAAgB;IACxC,MAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;IAC/B,MAAM,KAAK,IAAI,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG;IACtC,MAAM,MAAM,MAAM,6FAAA,CAAA,WAAE,CAAC,QAAQ,CAAC,MAAM;IACpC,MAAM,OAAO,KAAK,KAAK,CAAC;IAExB,IAAI,CAAC,IAAI,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;QAAO,OAAO;IAAa;IAExE,MAAM,OAAO,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC,OAAc,OAAO,KAAK,EAAE,MAAM,OAAO;IACvE,IAAI,CAAC,MAAM,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;QAAE,SAAS;QAAO,OAAO;IAAY;IAEzE,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;AAC3B","debugId":null}}]
}